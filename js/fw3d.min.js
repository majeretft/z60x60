THREE.OBJLoader=function(n){this.manager=n!==undefined?n:THREE.DefaultLoadingManager};THREE.OBJLoader.prototype={constructor:THREE.OBJLoader,load:function(n,t,i,r){var u=this,f=new THREE.XHRLoader(u.manager);f.setCrossOrigin(this.crossOrigin);f.load(n,function(n){t(u.parse(n))},i,r)},setCrossOrigin:function(n){this.crossOrigin=n},parse:function(n){function a(n){var t=parseInt(n);return(t>=0?t-1:t+u.length/3)*3}function v(n){var t=parseInt(n);return(t>=0?t-1:t+f.length/3)*3}function y(n){var t=parseInt(n);return(t>=0?t-1:t+s.length/2)*2}function w(n,t,i){r.vertices.push(u[n],u[n+1],u[n+2],u[t],u[t+1],u[t+2],u[i],u[i+1],u[i+2])}function b(n,t,i){r.normals.push(f[n],f[n+1],f[n+2],f[t],f[t+1],f[t+2],f[i],f[i+1],f[i+2])}function k(n,t,i){r.uvs.push(s[n],s[n+1],s[t],s[t+1],s[i],s[i+1])}function p(n,t,i,r,u,f,e,o,s,h,c,l){var g=a(n),p=a(t),nt=a(i),d;r===undefined?w(g,p,nt):(d=a(r),w(g,p,d),w(p,nt,d));u!==undefined&&(g=y(u),p=y(f),nt=y(e),r===undefined?k(g,p,nt):(d=y(o),k(g,p,d),k(p,nt,d)));s!==undefined&&(g=v(s),p=v(h),nt=v(c),r===undefined?b(g,p,nt):(d=v(l),b(g,p,d),b(p,nt,d)))}var e,c,r,o,i,t,d,h,tt,l,g;console.time("OBJLoader");c=[];/^o /gm.test(n)===!1&&(r={vertices:[],normals:[],uvs:[]},o={name:""},e={name:"",geometry:r,material:o},c.push(e));var u=[],f=[],s=[],nt=n.split("\n");for(h=0;h<nt.length;h++)if(i=nt[h],i=i.trim(),i.length===0||i.charAt(0)==="#")continue;else(t=/v( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)/.exec(i))!==null?u.push(parseFloat(t[1]),parseFloat(t[2]),parseFloat(t[3])):(t=/vn( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)/.exec(i))!==null?f.push(parseFloat(t[1]),parseFloat(t[2]),parseFloat(t[3])):(t=/vt( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)/.exec(i))!==null?s.push(parseFloat(t[1]),parseFloat(t[2])):(t=/f( +-?\d+)( +-?\d+)( +-?\d+)( +-?\d+)?/.exec(i))!==null?p(t[1],t[2],t[3],t[4]):(t=/f( +(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+))?/.exec(i))!==null?p(t[2],t[5],t[8],t[11],t[3],t[6],t[9],t[12]):(t=/f( +(-?\d+)\/(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+)\/(-?\d+))?/.exec(i))!==null?p(t[2],t[6],t[10],t[14],t[3],t[7],t[11],t[15],t[4],t[8],t[12],t[16]):(t=/f( +(-?\d+)\/\/(-?\d+))( +(-?\d+)\/\/(-?\d+))( +(-?\d+)\/\/(-?\d+))( +(-?\d+)\/\/(-?\d+))?/.exec(i))!==null?p(t[2],t[5],t[8],t[11],undefined,undefined,undefined,undefined,t[3],t[6],t[9],t[12]):/^o /.test(i)?(r={vertices:[],normals:[],uvs:[]},o={name:""},e={name:i.substring(2).trim(),geometry:r,material:o},c.push(e)):/^g /.test(i)||(/^usemtl /.test(i)?o.name=i.substring(7).trim():/^mtllib /.test(i)||/^s /.test(i));for(d=new THREE.Object3D,h=0,tt=c.length;h<tt;h++)e=c[h],r=e.geometry,l=new THREE.BufferGeometry,l.addAttribute("position",new THREE.BufferAttribute(new Float32Array(r.vertices),3)),r.normals.length>0&&l.addAttribute("normal",new THREE.BufferAttribute(new Float32Array(r.normals),3)),r.uvs.length>0&&l.addAttribute("uv",new THREE.BufferAttribute(new Float32Array(r.uvs),2)),o=new THREE.MeshLambertMaterial,o.name=e.material.name,g=new THREE.Mesh(l,o),g.name=e.name,d.add(g);return console.timeEnd("OBJLoader"),d}};THREE.MTLLoader=function(n){this.manager=n!==undefined?n:THREE.DefaultLoadingManager};THREE.MTLLoader.prototype={constructor:THREE.MTLLoader,load:function(n,t,i,r){var f=this,u=new THREE.XHRLoader(this.manager);u.setCrossOrigin(this.crossOrigin);u.load(n,function(n){t(f.parse(n))},i,r)},setBaseUrl:function(n){this.baseUrl=n},setCrossOrigin:function(n){this.crossOrigin=n},setMaterialOptions:function(n){this.materialOptions=n},parse:function(n){for(var i,f,t,r,o,e,h=n.split("\n"),u={},c=/\s+/,l={},s=0;s<h.length;s++)(i=h[s],i=i.trim(),i.length!==0&&i.charAt(0)!=="#")&&(f=i.indexOf(" "),t=f>=0?i.substring(0,f):i,t=t.toLowerCase(),r=f>=0?i.substring(f+1):"",r=r.trim(),t==="newmtl"?(u={name:r},l[r]=u):u&&(t==="ka"||t==="kd"||t==="ks"||t==="ke"?(o=r.split(c,3),u[t]=[parseFloat(o[0]),parseFloat(o[1]),parseFloat(o[2])]):u[t]=t==="map_ka"||t==="map_kd"||t==="map_ks"||t==="map_ns"||t==="map_d"||t==="decal"||t==="bump"||t==="map_bump"?this.parseMap(r,c):r));return e=new THREE.MTLLoader.MaterialCreator(this.baseUrl,this.materialOptions),e.setCrossOrigin(this.crossOrigin),e.setManager(this.manager),e.setMaterials(l),e},parseMap:function(n,t){if(n==null)return null;var o=/(?:\x2Dblendu\s+)on/i.test(n),s=/(?:\x2Dblendv\s+)on/i.test(n),h=/(?:\x2Dcc\s+)on/i.test(n),c=/(?:\x2Dclamp\s+)on/i.test(n),i=/\x2Do\s([\x2D\d\x2E\s]+)/i.exec(n),r=/\x2Ds\s([\x2D\d\x2E\s]+)/i.exec(n),u=/\x2Dt\s([\x2D\d\x2E\s]+)/i.exec(n),f=/\x2Dtexres\s(\d+)/i.exec(n),e=/(?:\s|^)([\w\x2D\x2E]*)$/.exec(n);return i&&i[1]!=null&&(i[1]=i[1].replace(/\s\x2D$/,"")),r&&r[1]!=null&&(r[1]=r[1].replace(/\s\x2D$/,"")),u&&u[1]!=null&&(u[1]=u[1].replace(/\s\x2D$/,"")),{blendu:o,blendv:s,cc:h,clamp:c,o:i&&i[1]!=null?i[1].split(t,3):null,s:r&&r[1]!=null?r[1].split(t,3):null,t:u&&u[1]!=null?u[1].split(t,3):null,texres:f&&f[1]!=null?Number(f[1]):null,tex:e?e[1]:null}}};THREE.MTLLoader.MaterialCreator=function(n,t){this.baseUrl=n;this.options=t;this.materialsInfo={};this.materials={};this.materialsArray=[];this.nameLookup={};this.side=this.options&&this.options.side?this.options.side:THREE.FrontSide;this.wrap=this.options&&this.options.wrap?this.options.wrap:THREE.RepeatWrapping};THREE.MTLLoader.MaterialCreator.prototype={constructor:THREE.MTLLoader.MaterialCreator,setCrossOrigin:function(n){this.crossOrigin=n},setManager:function(n){this.manager=n},setMaterials:function(n){this.materialsInfo=this.convert(n);this.materials={};this.materialsArray=[];this.nameLookup={}},convert:function(n){var i,r,u,f,e;if(!this.options)return n;i={};for(r in n){u=n[r];f={};i[r]=f;for(e in u){var o=!0,t=u[e],s=e.toLowerCase();switch(s){case"kd":case"ka":case"ks":case"ke":this.options&&this.options.normalizeRGB&&(t=[t[0]/255,t[1]/255,t[2]/255]);this.options&&this.options.ignoreZeroRGBs&&t[0]===0&&t[1]===0&&t[1]===0&&(o=!1);break;case"d":this.options&&this.options.invertTransparency&&(t=1-t)}o&&(f[s]=t)}}return i},preload:function(){for(var n in this.materialsInfo)this.create(n)},getIndex:function(n){return this.nameLookup[n]},getAsArray:function(){var n=0;for(var t in this.materialsInfo)this.materialsArray[n]=this.create(t),this.nameLookup[t]=n,n++;return this.materialsArray},create:function(n){return this.materials[n]===undefined&&this.createMaterial_(n),this.materials[n]},createMaterial_:function(n){var e=this.materialsInfo[n],t={name:n,side:this.side},f,i,r,u;for(f in e){i=e[f];switch(f.toLowerCase()){case"kd":t.color=(new THREE.Color).fromArray(i);break;case"ks":t.specular=(new THREE.Color).fromArray(i);break;case"ke":t.emissive=(new THREE.Color).fromArray(i);break;case"map_kd":t.map=this.loadTexture(this.baseUrl+i.tex);t.map.wrapS=this.wrap;t.map.wrapT=this.wrap;i.s&&(r=i.s[0]||1,u=i.s[1]||1,t.map.repeat=new THREE.Vector2(r,u));break;case"ns":t.shininess=parseFloat(i);break;case"d":i<1&&(t.transparent=!0,t.opacity=i);break;case"map_bump":case"bump":if(t.bumpMap)break;t.bumpMap=this.loadTexture(this.baseUrl+i.tex);t.bumpMap.wrapS=this.wrap;t.bumpMap.wrapT=this.wrap;i.s&&(r=i.s[0]||1,u=i.s[1]||1,t.bumpMap.repeat=new THREE.Vector2(r,u))}}return this.materials[n]=new THREE.MeshPhongMaterial(t),this.materials[n]},loadTexture:function(n,t,i,r,u){var f,e=THREE.Loader.Handlers.get(n),o=this.manager!==undefined?this.manager:THREE.DefaultLoadingManager;return e!==null?f=e.load(n,i):(f=new THREE.Texture,e=new THREE.ImageLoader(o),e.setCrossOrigin(this.crossOrigin),e.load(n,function(n){f.image=THREE.MTLLoader.ensurePowerOfTwo_(n);f.needsUpdate=!0;i&&i(f)},r,u)),t!==undefined&&(f.mapping=t),f}};THREE.MTLLoader.ensurePowerOfTwo_=function(n){var t,i;return!THREE.Math.isPowerOfTwo(n.width)||!THREE.Math.isPowerOfTwo(n.height)?(t=document.createElement("canvas"),t.width=THREE.MTLLoader.nextHighestPowerOfTwo_(n.width),t.height=THREE.MTLLoader.nextHighestPowerOfTwo_(n.height),i=t.getContext("2d"),i.drawImage(n,0,0,n.width,n.height,0,0,t.width,t.height),t):n};THREE.MTLLoader.nextHighestPowerOfTwo_=function(n){--n;for(var t=1;t<32;t<<=1)n=n|n>>t;return n+1};THREE.EventDispatcher.prototype.apply(THREE.MTLLoader.prototype);THREE.OBJMTLLoader=function(n){this.manager=n!==undefined?n:THREE.DefaultLoadingManager};THREE.OBJMTLLoader.prototype={constructor:THREE.OBJMTLLoader,load:function(n,t,i,r,u){var f=this,e=new THREE.MTLLoader(this.manager);e.setBaseUrl(n.substr(0,n.lastIndexOf("/")+1));e.setCrossOrigin(this.crossOrigin);e.load(t,function(t){var o=t,e;o.preload();e=new THREE.XHRLoader(f.manager);e.setCrossOrigin(f.crossOrigin);e.load(n,function(n){var t=f.parse(n);t.traverse(function(n){if(n instanceof THREE.Mesh&&n.material.name){var t=o.create(n.material.name);t&&(n.material=t)}});i(t)},r,u)},r,u)},setCrossOrigin:function(n){this.crossOrigin=n},parse:function(n,t){function d(n,t,i){return new THREE.Vector3(n,t,i)}function tt(n,t){return new THREE.Vector2(n,t)}function g(n,t,i,r){return new THREE.Face3(n,t,i,r)}function h(n,t){o.length>0&&(u.vertices=o,u.mergeVertices(),u.computeFaceNormals(),u.computeBoundingSphere(),c.add(l),u=new THREE.Geometry,l=new THREE.Mesh(u,e));n!==undefined&&(l.name=n);t!==undefined&&(e=new THREE.MeshLambertMaterial,e.name=t,l.material=e)}function s(n,t,i,r){r===undefined?u.faces.push(g(parseInt(n)-(f+1),parseInt(t)-(f+1),parseInt(i)-(f+1))):u.faces.push(g(parseInt(n)-(f+1),parseInt(t)-(f+1),parseInt(i)-(f+1),[a[parseInt(r[0])-1].clone(),a[parseInt(r[1])-1].clone(),a[parseInt(r[2])-1].clone()]))}function b(n,t,i){u.faceVertexUvs[0].push([v[parseInt(n)-1].clone(),v[parseInt(t)-1].clone(),v[parseInt(i)-1].clone()])}function y(n,t,i){n[3]===undefined?(s(n[0],n[1],n[2],i),!(t===undefined)&&t.length>0&&b(t[0],t[1],t[2])):(!(i===undefined)&&i.length>0?(s(n[0],n[1],n[3],[i[0],i[1],i[3]]),s(n[1],n[2],n[3],[i[1],i[2],i[3]])):(s(n[0],n[1],n[3]),s(n[1],n[2],n[3])),!(t===undefined)&&t.length>0&&(b(t[0],t[1],t[3]),b(t[1],t[2],t[3])))}for(var r,i,p,f=0,w=new THREE.Group,c=w,u=new THREE.Geometry,e=new THREE.MeshLambertMaterial,l=new THREE.Mesh(u,e),o=[],a=[],v=[],nt=n.split("\n"),k=0;k<nt.length;k++)if(r=nt[k],r=r.trim(),r.length===0||r.charAt(0)==="#")continue;else(i=/v( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)/.exec(r))!==null?o.push(d(parseFloat(i[1]),parseFloat(i[2]),parseFloat(i[3]))):(i=/vn( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)/.exec(r))!==null?a.push(d(parseFloat(i[1]),parseFloat(i[2]),parseFloat(i[3]))):(i=/vt( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)/.exec(r))!==null?v.push(tt(parseFloat(i[1]),parseFloat(i[2]))):(i=/f( +\d+)( +\d+)( +\d+)( +\d+)?/.exec(r))!==null?y([i[1],i[2],i[3],i[4]]):(i=/f( +(\d+)\/(\d+))( +(\d+)\/(\d+))( +(\d+)\/(\d+))( +(\d+)\/(\d+))?/.exec(r))!==null?y([i[2],i[5],i[8],i[11]],[i[3],i[6],i[9],i[12]]):(i=/f( +(\d+)\/(\d+)\/(\d+))( +(\d+)\/(\d+)\/(\d+))( +(\d+)\/(\d+)\/(\d+))( +(\d+)\/(\d+)\/(\d+))?/.exec(r))!==null?y([i[2],i[6],i[10],i[14]],[i[3],i[7],i[11],i[15]],[i[4],i[8],i[12],i[16]]):(i=/f( +(\d+)\/\/(\d+))( +(\d+)\/\/(\d+))( +(\d+)\/\/(\d+))( +(\d+)\/\/(\d+))?/.exec(r))!==null?y([i[2],i[5],i[8],i[11]],[],[i[3],i[6],i[9],i[12]]):/^o /.test(r)?(h(),f=f+o.length,o=[],c=new THREE.Object3D,c.name=r.substring(2).trim(),w.add(c)):/^g /.test(r)?h(r.substring(2).trim(),undefined):/^usemtl /.test(r)?h(undefined,r.substring(7).trim()):/^mtllib /.test(r)?t&&(p=r.substring(7),p=p.trim(),t(p)):/^s /.test(r)||console.log("THREE.OBJMTLLoader: Unhandled line "+r);return h(undefined,undefined),w}};THREE.EventDispatcher.prototype.apply(THREE.OBJMTLLoader.prototype),function(){function n(n){this.object=n;this.target=new THREE.Vector3;this.minDistance=0;this.maxDistance=Infinity;this.minZoom=0;this.maxZoom=Infinity;this.minPolarAngle=0;this.maxPolarAngle=Math.PI;this.minAzimuthAngle=- Infinity;this.maxAzimuthAngle=Infinity;this.enableDamping=!1;this.dampingFactor=.25;var t=this,u=1e-6,r,i,f=0,e=0,o=1,s=new THREE.Vector3,h=!1;this.getPolarAngle=function(){return i};this.getAzimuthalAngle=function(){return r};this.rotateLeft=function(n){e-=n};this.rotateUp=function(n){f-=n};this.panLeft=function(){var n=new THREE.Vector3;return function(t){var i=this.object.matrix.elements;n.set(i[0],i[1],i[2]);n.multiplyScalar(-t);s.add(n)}}();this.panUp=function(){var n=new THREE.Vector3;return function(t){var i=this.object.matrix.elements;n.set(i[4],i[5],i[6]);n.multiplyScalar(t);s.add(n)}}();this.pan=function(n,i,r,u){if(t.object instanceof THREE.PerspectiveCamera){var e=t.object.position,o=e.clone().sub(t.target),f=o.length();f*=Math.tan(t.object.fov/2*Math.PI/180);t.panLeft(2*n*f/u);t.panUp(2*i*f/u)}else t.object instanceof THREE.OrthographicCamera?(t.panLeft(n*(t.object.right-t.object.left)/r),t.panUp(i*(t.object.top-t.object.bottom)/u)):console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.")};this.dollyIn=function(n){t.object instanceof THREE.PerspectiveCamera?o/=n:t.object instanceof THREE.OrthographicCamera?(t.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom*n)),t.object.updateProjectionMatrix(),h=!0):console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.")};this.dollyOut=function(n){t.object instanceof THREE.PerspectiveCamera?o*=n:t.object instanceof THREE.OrthographicCamera?(t.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/n)),t.object.updateProjectionMatrix(),h=!0):console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.")};this.update=function(){var t=new THREE.Vector3,c=(new THREE.Quaternion).setFromUnitVectors(n.up,new THREE.Vector3(0,1,0)),v=c.clone().inverse(),l=new THREE.Vector3,a=new THREE.Quaternion;return function(){var y=this.object.position,n;return(t.copy(y).sub(this.target),t.applyQuaternion(c),r=Math.atan2(t.x,t.z),i=Math.atan2(Math.sqrt(t.x*t.x+t.z*t.z),t.y),r+=e,i+=f,r=Math.max(this.minAzimuthAngle,Math.min(this.maxAzimuthAngle,r)),i=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,i)),i=Math.max(u,Math.min(Math.PI-u,i)),n=t.length()*o,n=Math.max(this.minDistance,Math.min(this.maxDistance,n)),this.target.add(s),t.x=n*Math.sin(i)*Math.sin(r),t.y=n*Math.cos(i),t.z=n*Math.sin(i)*Math.cos(r),t.applyQuaternion(v),y.copy(this.target).add(t),this.object.lookAt(this.target),this.enableDamping===!0?(e*=1-this.dampingFactor,f*=1-this.dampingFactor):(e=0,f=0),o=1,s.set(0,0,0),h||l.distanceToSquared(this.object.position)>u||8*(1-a.dot(this.object.quaternion))>u)?(l.copy(this.object.position),a.copy(this.object.quaternion),h=!1,!0):!1}}()}THREE.OrbitControls=function(t,i,r){function b(n,t){var i=u.domElement===document?u.domElement.body:u.domElement;o.pan(n,t,i.clientWidth,i.clientHeight)}function ct(){return Math.PI/1800*u.autoRotateSpeed}function k(){return Math.pow(.95,u.zoomSpeed)}function ut(n){if(u.enabled!==!1){n.preventDefault();var t=n.clientX,i=r?-n.clientY:n.clientY;if(n.button===u.mouseButtons.ORBIT){if(u.enableRotate===!1)return;e=f.ROTATE;s.set(t,i)}else if(n.button===u.mouseButtons.ZOOM){if(u.enableZoom===!1)return;e=f.DOLLY;y.set(t,i)}else if(n.button===u.mouseButtons.PAN){if(u.enablePan===!1)return;e=f.PAN;l.set(t,i)}e!==f.NONE&&(document.addEventListener("mousemove",tt,!1),document.addEventListener("mouseup",it,!1),u.dispatchEvent(g))}}function tt(n){if(u.enabled!==!1){n.preventDefault();var d=u.domElement===document?u.domElement.body:u.domElement,t=n.clientX,i=r?-n.clientY:n.clientY;if(e===f.ROTATE){if(u.enableRotate===!1)return;h.set(t,i);c.subVectors(h,s);o.rotateLeft(2*Math.PI*c.x/d.clientWidth*u.rotateSpeed);o.rotateUp(2*Math.PI*c.y/d.clientHeight*u.rotateSpeed);s.copy(h)}else if(e===f.DOLLY){if(u.enableZoom===!1)return;p.set(t,i);w.subVectors(p,y);w.y>0?o.dollyIn(k()):w.y<0&&o.dollyOut(k());y.copy(p)}else if(e===f.PAN){if(u.enablePan===!1)return;a.set(t,i);v.subVectors(a,l);b(v.x,v.y);l.copy(a)}e!==f.NONE&&u.update()}}function it(){u.enabled!==!1&&(document.removeEventListener("mousemove",tt,!1),document.removeEventListener("mouseup",it,!1),u.dispatchEvent(nt),e=f.NONE)}function d(n){if(u.enabled!==!1&&u.enableZoom!==!1&&e===f.NONE){n.preventDefault();n.stopPropagation();var t=0;n.wheelDelta!==undefined?t=n.wheelDelta:n.detail!==undefined&&(t=-n.detail);t>0?o.dollyOut(k()):t<0&&o.dollyIn(k());u.update();u.dispatchEvent(g);u.dispatchEvent(nt)}}function ft(n){if(u.enabled!==!1&&u.enableKeys!==!1&&u.enablePan!==!1)switch(n.keyCode){case u.keys.UP:b(0,u.keyPanSpeed);u.update();break;case u.keys.BOTTOM:b(0,-u.keyPanSpeed);u.update();break;case u.keys.LEFT:b(u.keyPanSpeed,0);u.update();break;case u.keys.RIGHT:b(-u.keyPanSpeed,0);u.update()}}function et(n){if(u.enabled!==!1){switch(n.touches.length){case 1:if(u.enableRotate===!1)return;e=f.TOUCH_ROTATE;s.set(n.touches[0].pageX,n.touches[0].pageY);break;case 2:if(u.enableZoom===!1)return;e=f.TOUCH_DOLLY;var t=n.touches[0].pageX-n.touches[1].pageX,i=n.touches[0].pageY-n.touches[1].pageY,r=Math.sqrt(t*t+i*i);y.set(0,r);break;case 3:if(u.enablePan===!1)return;e=f.TOUCH_PAN;l.set(n.touches[0].pageX,n.touches[0].pageY);break;default:e=f.NONE}e!==f.NONE&&u.dispatchEvent(g)}}function ot(n){var t;if(u.enabled!==!1){n.preventDefault();n.stopPropagation();t=u.domElement===document?u.domElement.body:u.domElement;switch(n.touches.length){case 1:if(u.enableRotate===!1)return;if(e!==f.TOUCH_ROTATE)return;h.set(n.touches[0].pageX,n.touches[0].pageY);c.subVectors(h,s);o.rotateLeft(2*Math.PI*c.x/t.clientWidth*u.rotateSpeed);o.rotateUp(2*Math.PI*c.y/t.clientHeight*u.rotateSpeed);s.copy(h);u.update();break;case 2:if(u.enableZoom===!1)return;if(e!==f.TOUCH_DOLLY)return;var i=n.touches[0].pageX-n.touches[1].pageX,r=n.touches[0].pageY-n.touches[1].pageY,d=Math.sqrt(i*i+r*r);p.set(0,d);w.subVectors(p,y);w.y>0?o.dollyOut(k()):w.y<0&&o.dollyIn(k());y.copy(p);u.update();break;case 3:if(u.enablePan===!1)return;if(e!==f.TOUCH_PAN)return;a.set(n.touches[0].pageX,n.touches[0].pageY);v.subVectors(a,l);b(v.x,v.y);l.copy(a);u.update();break;default:e=f.NONE}}}function st(){u.enabled!==!1&&(u.dispatchEvent(nt),e=f.NONE)}function ht(n){n.preventDefault()}var o=new n(t);this.domElement=i!==undefined?i:document;Object.defineProperty(this,"constraint",{get:function(){return o}});this.getPolarAngle=function(){return o.getPolarAngle()};this.getAzimuthalAngle=function(){return o.getAzimuthalAngle()};this.enabled=!0;this.center=this.target;this.enableZoom=!1;this.zoomSpeed=1;this.enableRotate=!0;this.rotateSpeed=1;this.enablePan=!1;this.keyPanSpeed=7;this.autoRotate=!0;this.autoRotateSpeed=2;this.enableKeys=!1;this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40};this.mouseButtons={ORBIT:THREE.MOUSE.LEFT,ZOOM:THREE.MOUSE.MIDDLE,PAN:THREE.MOUSE.RIGHT};var u=this,s=new THREE.Vector2,h=new THREE.Vector2,c=new THREE.Vector2,l=new THREE.Vector2,a=new THREE.Vector2,v=new THREE.Vector2,y=new THREE.Vector2,p=new THREE.Vector2,w=new THREE.Vector2,f={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY:4,TOUCH_PAN:5},e=f.NONE;this.target0=this.target.clone();this.position0=this.object.position.clone();this.zoom0=this.object.zoom;var rt={type:"change"},g={type:"start"},nt={type:"end"};this.update=function(){this.autoRotate&&e===f.NONE&&o.rotateLeft(ct());o.update()===!0&&this.dispatchEvent(rt)};this.reset=function(){e=f.NONE;this.target.copy(this.target0);this.object.position.copy(this.position0);this.object.zoom=this.zoom0;this.object.updateProjectionMatrix();this.dispatchEvent(rt);this.update()};this.dispose=function(){this.domElement.removeEventListener("contextmenu",ht,!1);this.domElement.removeEventListener("mousedown",ut,!1);this.domElement.removeEventListener("mousewheel",d,!1);this.domElement.removeEventListener("MozMousePixelScroll",d,!1);this.domElement.removeEventListener("touchstart",et,!1);this.domElement.removeEventListener("touchend",st,!1);this.domElement.removeEventListener("touchmove",ot,!1);document.removeEventListener("mousemove",tt,!1);document.removeEventListener("mouseup",it,!1);window.removeEventListener("keydown",ft,!1)};this.domElement.addEventListener("contextmenu",ht,!1);this.domElement.addEventListener("mousedown",ut,!1);this.domElement.addEventListener("mousewheel",d,!1);this.domElement.addEventListener("MozMousePixelScroll",d,!1);this.domElement.addEventListener("touchstart",et,!1);this.domElement.addEventListener("touchend",st,!1);this.domElement.addEventListener("touchmove",ot,!1);window.addEventListener("keydown",ft,!1);this.update()};THREE.OrbitControls.prototype=Object.create(THREE.EventDispatcher.prototype);THREE.OrbitControls.prototype.constructor=THREE.OrbitControls;Object.defineProperties(THREE.OrbitControls.prototype,{object:{get:function(){return this.constraint.object}},target:{get:function(){return this.constraint.target},set:function(n){console.warn("THREE.OrbitControls: target is now immutable. Use target.set() instead.");this.constraint.target.copy(n)}},minDistance:{get:function(){return this.constraint.minDistance},set:function(n){this.constraint.minDistance=n}},maxDistance:{get:function(){return this.constraint.maxDistance},set:function(n){this.constraint.maxDistance=n}},minZoom:{get:function(){return this.constraint.minZoom},set:function(n){this.constraint.minZoom=n}},maxZoom:{get:function(){return this.constraint.maxZoom},set:function(n){this.constraint.maxZoom=n}},minPolarAngle:{get:function(){return this.constraint.minPolarAngle},set:function(n){this.constraint.minPolarAngle=n}},maxPolarAngle:{get:function(){return this.constraint.maxPolarAngle},set:function(n){this.constraint.maxPolarAngle=n}},minAzimuthAngle:{get:function(){return this.constraint.minAzimuthAngle},set:function(n){this.constraint.minAzimuthAngle=n}},maxAzimuthAngle:{get:function(){return this.constraint.maxAzimuthAngle},set:function(n){this.constraint.maxAzimuthAngle=n}},enableDamping:{get:function(){return this.constraint.enableDamping},set:function(n){this.constraint.enableDamping=n}},dampingFactor:{get:function(){return this.constraint.dampingFactor},set:function(n){this.constraint.dampingFactor=n}},noZoom:{get:function(){return console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),!this.enableZoom},set:function(n){console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead.");this.enableZoom=!n}},noRotate:{get:function(){return console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),!this.enableRotate},set:function(n){console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead.");this.enableRotate=!n}},noPan:{get:function(){return console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),!this.enablePan},set:function(n){console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead.");this.enablePan=!n}},noKeys:{get:function(){return console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),!this.enableKeys},set:function(n){console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead.");this.enableKeys=!n}},staticMoving:{get:function(){return console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),!this.constraint.enableDamping},set:function(n){console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead.");this.constraint.enableDamping=!n}},dynamicDampingFactor:{get:function(){return console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.constraint.dampingFactor},set:function(n){console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead.");this.constraint.dampingFactor=n}}})}();