THREE.OBJMTLLoader=function(n){this.manager=n!==undefined?n:THREE.DefaultLoadingManager};THREE.OBJMTLLoader.prototype={constructor:THREE.OBJMTLLoader,load:function(n,t,i,r,u){var f=this,e=new THREE.MTLLoader(this.manager);e.setBaseUrl(n.substr(0,n.lastIndexOf("/")+1));e.setCrossOrigin(this.crossOrigin);e.load(t,function(t){var o=t,e;o.preload();e=new THREE.XHRLoader(f.manager);e.setCrossOrigin(f.crossOrigin);e.load(n,function(n){var t=f.parse(n);t.traverse(function(n){if(n instanceof THREE.Mesh&&n.material.name){var t=o.create(n.material.name);t&&(n.material=t)}});i(t)},r,u)},r,u)},setCrossOrigin:function(n){this.crossOrigin=n},parse:function(n,t){function d(n,t,i){return new THREE.Vector3(n,t,i)}function tt(n,t){return new THREE.Vector2(n,t)}function g(n,t,i,r){return new THREE.Face3(n,t,i,r)}function h(n,t){o.length>0&&(u.vertices=o,u.mergeVertices(),u.computeFaceNormals(),u.computeBoundingSphere(),c.add(l),u=new THREE.Geometry,l=new THREE.Mesh(u,e));n!==undefined&&(l.name=n);t!==undefined&&(e=new THREE.MeshLambertMaterial,e.name=t,l.material=e)}function s(n,t,i,r){r===undefined?u.faces.push(g(parseInt(n)-(f+1),parseInt(t)-(f+1),parseInt(i)-(f+1))):u.faces.push(g(parseInt(n)-(f+1),parseInt(t)-(f+1),parseInt(i)-(f+1),[a[parseInt(r[0])-1].clone(),a[parseInt(r[1])-1].clone(),a[parseInt(r[2])-1].clone()]))}function b(n,t,i){u.faceVertexUvs[0].push([v[parseInt(n)-1].clone(),v[parseInt(t)-1].clone(),v[parseInt(i)-1].clone()])}function y(n,t,i){n[3]===undefined?(s(n[0],n[1],n[2],i),!(t===undefined)&&t.length>0&&b(t[0],t[1],t[2])):(!(i===undefined)&&i.length>0?(s(n[0],n[1],n[3],[i[0],i[1],i[3]]),s(n[1],n[2],n[3],[i[1],i[2],i[3]])):(s(n[0],n[1],n[3]),s(n[1],n[2],n[3])),!(t===undefined)&&t.length>0&&(b(t[0],t[1],t[3]),b(t[1],t[2],t[3])))}for(var r,i,p,f=0,w=new THREE.Group,c=w,u=new THREE.Geometry,e=new THREE.MeshLambertMaterial,l=new THREE.Mesh(u,e),o=[],a=[],v=[],nt=n.split("\n"),k=0;k<nt.length;k++)if(r=nt[k],r=r.trim(),r.length===0||r.charAt(0)==="#")continue;else(i=/v( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)/.exec(r))!==null?o.push(d(parseFloat(i[1]),parseFloat(i[2]),parseFloat(i[3]))):(i=/vn( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)/.exec(r))!==null?a.push(d(parseFloat(i[1]),parseFloat(i[2]),parseFloat(i[3]))):(i=/vt( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)/.exec(r))!==null?v.push(tt(parseFloat(i[1]),parseFloat(i[2]))):(i=/f( +\d+)( +\d+)( +\d+)( +\d+)?/.exec(r))!==null?y([i[1],i[2],i[3],i[4]]):(i=/f( +(\d+)\/(\d+))( +(\d+)\/(\d+))( +(\d+)\/(\d+))( +(\d+)\/(\d+))?/.exec(r))!==null?y([i[2],i[5],i[8],i[11]],[i[3],i[6],i[9],i[12]]):(i=/f( +(\d+)\/(\d+)\/(\d+))( +(\d+)\/(\d+)\/(\d+))( +(\d+)\/(\d+)\/(\d+))( +(\d+)\/(\d+)\/(\d+))?/.exec(r))!==null?y([i[2],i[6],i[10],i[14]],[i[3],i[7],i[11],i[15]],[i[4],i[8],i[12],i[16]]):(i=/f( +(\d+)\/\/(\d+))( +(\d+)\/\/(\d+))( +(\d+)\/\/(\d+))( +(\d+)\/\/(\d+))?/.exec(r))!==null?y([i[2],i[5],i[8],i[11]],[],[i[3],i[6],i[9],i[12]]):/^o /.test(r)?(h(),f=f+o.length,o=[],c=new THREE.Object3D,c.name=r.substring(2).trim(),w.add(c)):/^g /.test(r)?h(r.substring(2).trim(),undefined):/^usemtl /.test(r)?h(undefined,r.substring(7).trim()):/^mtllib /.test(r)?t&&(p=r.substring(7),p=p.trim(),t(p)):/^s /.test(r)||console.log("THREE.OBJMTLLoader: Unhandled line "+r);return h(undefined,undefined),w}};THREE.EventDispatcher.prototype.apply(THREE.OBJMTLLoader.prototype);