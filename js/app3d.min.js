var App=function(){this._fovMin=25;this._fovMax=50;this.orbits=[];this.modelName=App.getQueryStringParam("obj")};App.getGLState=function(){try{var n=document.createElement("canvas");return!!(window.WebGLRenderingContext&&(n.getContext("webgl")||n.getContext("experimental-webgl")))}catch(t){return!1}};App.getQueryStringParam=function(n){if(!n)return null;var i=new RegExp("[\\?&]"+n+"=([^&#]*)"),t=i.exec(location.search);return t==null?"":decodeURIComponent(t[1].replace(/\+/g," "))};App.prototype={constructor:App,buildScene:function(){var t,i,f,n,r,e,u;this.modelName&&(t=this,i=$("#scene")[0],this.renderer=new THREE.WebGLRenderer({alpha:!0,canvas:i,antialias:!0}),this.renderer.setSize(window.innerWidth,window.innerHeight),this.camera=new THREE.PerspectiveCamera(45,window.innerWidth/window.innerHeight,1,4e3),f=new THREE.AmbientLight(5592405),n=new THREE.PointLight(16777215),n.intensity=.9,this.scene=new THREE.Scene,this.scene.add(n),this.scene.add(f),this.camera.lookAt(this.scene.position),this.camera.position.set(50,30,50),n.position.set(50,50,50),this.orbits.push(new THREE.OrbitControls(this.camera,i)),this.orbits.push(new THREE.OrbitControls(n,i)),r=function(n){var r=n.deltaY||n.wheelDelta,i;n.preventDefault?n.preventDefault():n.returnValue=!1;i=r*.05;t.changeFov(i)},"onwheel"in document?document.addEventListener("wheel",r,!1):"onmousewheel"in document&&document.addEventListener("mousewheel",r,!1),e=new THREE.OBJMTLLoader,u="obj3d/",e.load(u+this.modelName+".obj",u+this.modelName+".mtl",function(n){n.scale.set(.6,.6,.6);n.position.y=-10;t.scene.add(n);t.obj3d=n}))},changeFov:function(n){var t=this.camera.fov+n;t<this._fovMin||t>this._fovMax||(this.camera.fov=t,this.camera.updateProjectionMatrix())},changeColor:function(n){var t,i;this.obj3d&&this.oldColor!=n&&(t=this.obj3d.children[2],t&&t.material)&&(i=n.substring(1),t.material.color=new THREE.Color(parseInt(i,16)),this.oldColor=n)}};$(function(){var n=new App,i,t;n.buildScene();$(window).resize(function(){n.renderer.setSize(window.innerWidth,window.innerHeight);n.camera.aspect=window.innerWidth/window.innerHeight;n.camera.updateProjectionMatrix()});i=function(){if(viewCfg.autorotate)for(var t=0;t<n.orbits.length;t++)n.orbits[t].update();viewCfg.matColor&&n.changeColor(viewCfg.matColor);n.renderer.render(n.scene,n.camera)};t=function(){requestAnimationFrame(t);i()};t()});